(this["webpackJsonppenne-pinching"]=this["webpackJsonppenne-pinching"]||[]).push([[0],{305:function(e,t){e.exports="data:image/png;base64,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"},335:function(e,t,a){e.exports=a(528)},528:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(37),i=a(58),l=a.n(i),o=a(92),u=a(27),s=a(34),m=a(56),d=a(309),f=a(129),h=a.n(f),g=(a(342),a(228)),E=a(107),A=a(283),y=a.n(A),p=a(313),b=a(545),v=a(536),w=a(544),j=a(134),O=a(79),D=a(538),C=a(539),k=a(535),B=a(540),S=a(90),I=a(190),P=a(82),x=a(135),M=a(197),Y=Object(x.c)(new M.a({id:"home",initial:"analytics",states:{add:{on:{ANALYTICS:"analytics"},initial:"pageone",states:{pageone:{on:{SUCCESS:"success"}},success:{on:{RESTART:"pageone"}}}},analytics:{on:{ADD:"add"},initial:"summary",states:{summary:{on:{PREVIOUS:"meals",NEXT:"history"}},history:{on:{PREVIOUS:"summary",NEXT:"split"}},split:{on:{PREVIOUS:"history",NEXT:"menu"}},menu:{on:{PREVIOUS:"split",NEXT:"weekdays"}},weekdays:{on:{PREVIOUS:"menu",NEXT:"meals"}},meals:{on:{PREVIOUS:"weekdays",NEXT:"summary"}}}}}})).start(),Q=a(168),U=a(189),N=a(151),z=a(94),T=a(533),G=a(543),R=a(532),H=a(38),F=a.n(H),q=a(68),J=a(78),L=a(67),W=a.n(L);function K(){var e=Object(J.a)(["\n    mutation MyMutation($id: uuid!) {\n        delete_meals(where: {id: {_eq: $id}}) {\n            returning {\n                id\n            }\n        }\n    }\n"]);return K=function(){return e},e}function X(){var e=Object(J.a)(["\n    mutation InsertMenuItem($data: [ menu_insert_input! ]! ) {\n        insert_menu(objects: $data ) {\n            returning {\n                id\n            }\n        }\n    }\n"]);return X=function(){return e},e}function Z(){var e=Object(J.a)(['\n    mutation UpdateMeals($id: UUID!, $data: [ meals_update_input! ]! ) {\n        update_meals(where: {id: {_eq: "" }}, _set: $data ) {\n            returning {\n                id\n            }\n        }\n    }\n']);return Z=function(){return e},e}function V(){var e=Object(J.a)(["\n    mutation InsertMeals($data: [ meals_insert_input! ]! ) {\n        insert_meals(objects: $data ) {\n            returning {\n                id\n            }\n        }\n    }\n"]);return V=function(){return e},e}var _=W()(V()),$=(W()(Z()),W()(X())),ee=W()(K());function te(){var e=Object(J.a)(["\n    query GetTestingMeals {\n        meals {\n            id\n            date\n            menu {\n                category\n                cost\n                name\n            }\n            shared\n            who\n            isDinner\n            incidentals\n            test\n        }\n    }\n"]);return te=function(){return e},e}function ae(){var e=Object(J.a)(["\n    query GetFilteredMenu($category: [String!] ) {\n        menu(where: {category: {_in: $category}}) {\n            active\n            cost\n            name\n            id\n            active\n        }\n    }\n"]);return ae=function(){return e},e}function ne(){var e=Object(J.a)(["\n    query GetFilteredMeals($category: String! ) {\n        meals(where: {test: {_eq: false}, menu: {category: {_eq: $category}}}) {\n            date\n            menu {\n                name\n            }\n            shared\n            who\n        }\n    }\n"]);return ne=function(){return e},e}function re(){var e=Object(J.a)(["\n    query GetMenu {\n        menu {\n            category\n            cost\n            id\n            name\n            active\n        }\n    }\n"]);return re=function(){return e},e}function ce(){var e=Object(J.a)(["\n    query GetAllMeals {\n        meals(where: {test: {_eq: false}}) {\n            id\n            date\n            menu {\n                category\n                cost\n                name\n            }\n            shared\n            who\n            isDinner\n            incidentals\n            test\n        }\n    }\n"]);return ce=function(){return e},e}var ie=W()(ce()),le=W()(re()),oe=(W()(ne()),W()(ae())),ue=W()(te()),se=a(284),me={position:"fixed",top:0,left:0,width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",zIndex:-1},de=function(){return r.a.createElement("div",{style:me},r.a.createElement(se.a,{size:"large"}))},fe=v.a.Title,he=v.a.Text,ge=z.a.Option,Ee=z.a.OptGroup,Ae=function(e){var t=e.confirmSave,a=e.authState,c=Object(P.useService)(Y),i=Object(s.a)(c,2)[1],m=Object(q.b)(le).data,d=Object(q.a)(_),f=Object(s.a)(d,2),h=f[0],g=f[1].loading,E=Object(q.a)($),A=Object(s.a)(E,2),y=A[0],b=A[1].loading,v=Object(n.useState)(!1),w=Object(s.a)(v,2),D=w[0],x=w[1],M=Object(n.useState)({category:"",name:"",cost:null}),Q=Object(s.a)(M,2),z=Q[0],H=Q[1],J=Object(n.useState)(!1),L=Object(s.a)(J,2),W=L[0],K=L[1],X=Object(n.useState)(!1),Z=Object(s.a)(X,2),V=Z[0],ee=Z[1],te=Object(n.useState)({date:F()((new Date).toLocaleDateString(),"DD-MM-YYYY")._i,katie:{menu_id:""},chris:{menu_id:""},shared:!0,testing:!1,isDinner:!0,incidentals:null}),ae=Object(s.a)(te,2),ne=ae[0],re=ae[1],ce=function(){var e=Object(o.a)(l.a.mark((function e(){var a,n,r,c,o,u,s,m,d,f,g;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ee(!1),a=ne.date,n=ne.shared,r=ne.katie,c=ne.chris,o=ne.testing,u=ne.isDinner,s=ne.incidentals,m=!(r.menu_id&&!c.menu_id||!r.menu_id&&c.menu_id)&&n,d=s?r.menu_id&&c.menu_id?s/2:s:0,f=[],r.menu_id&&f.push({menu_id:r.menu_id,shared:m,who:"Katie",date:a,test:o,isDinner:u,incidentals:d}),c.menu_id&&f.push({menu_id:c.menu_id,shared:m,who:"Chris",date:a,test:o,isDinner:u,incidentals:d}),!f.length){e.next=19;break}return e.prev=8,e.next=11,h({variables:{data:f},refetchQueries:[{query:ie}]});case 11:g=e.sent,t(g.data.insert_meals.returning),i("SUCCESS"),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(8),ee(!0);case 19:case"end":return e.stop()}}),e,null,[[8,16]])})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=Object(o.a)(l.a.mark((function e(){var t,a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=z.category,a=z.cost,n=z.name,K(!1),t&&a&&n){e.next=6;break}K("Fields missing"),e.next=16;break;case 6:return e.prev=6,e.next=9,y({variables:{data:[z]},refetchQueries:[{query:le}],awaitRefetchQueries:!0});case 9:x(!1),H({category:"",name:"",cost:""}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),console.error(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(){return e.apply(this,arguments)}}();if(!m)return r.a.createElement(de,null);var ue=m.menu,se=ue.sort((function(e,t){return e.name<t.name?-1:1})),me=Object(U.a)(new Set(ue.map((function(e){return e.category})))).sort();return r.a.createElement(j.a,null,r.a.createElement(O.a,{span:24},r.a.createElement(j.a,{justify:"space-between"},r.a.createElement(O.a,{span:18},r.a.createElement(j.a,{type:"flex",justify:"start"},r.a.createElement(fe,{level:4},"Add a New Meal"))),r.a.createElement(O.a,{span:6},r.a.createElement(j.a,{type:"flex",justify:"end"},r.a.createElement(S.a,{icon:r.a.createElement(p.a,null),onClick:function(){return x(!0)}},"Menu")))),V&&r.a.createElement(he,{type:"danger"},"Something went wrong..."),!a&&r.a.createElement(he,{type:"warning"},"Please log in to make any changes"),r.a.createElement(k.a,{onFinish:ce,labelAlign:"left"},r.a.createElement(k.a.Item,{label:"Date"},r.a.createElement(T.a,{format:"DD-MM-YYYY",defaultValue:F()((new Date).toLocaleDateString(),"DD-MM-YYYY"),onChange:function(e){return re(Object(u.a)(Object(u.a)({},ne),{},{date:e._d.toLocaleDateString()}))}})),r.a.createElement(ye,{who:"katie",setFormData:re,formData:ne,menu:se,menuCategories:me}),r.a.createElement(ye,{who:"chris",setFormData:re,formData:ne,menu:se,menuCategories:me}),r.a.createElement(j.a,{gutter:16},r.a.createElement(O.a,{xs:8,sm:4,md:4,lg:4,xl:4},r.a.createElement(k.a.Item,null,r.a.createElement(G.a,{checkedChildren:"Dinner",unCheckedChildren:"Lunch",defaultChecked:!0,onChange:function(e){return re(Object(u.a)(Object(u.a)({},ne),{},{isDinner:e}))}}))),r.a.createElement(O.a,{xs:8,sm:4,md:4,lg:4,xl:4},r.a.createElement(k.a.Item,null,r.a.createElement(G.a,{checkedChildren:"Shared",unCheckedChildren:"Shared",defaultChecked:!0,onChange:function(e){return re(Object(u.a)(Object(u.a)({},ne),{},{shared:e}))}})))),r.a.createElement(S.a,{type:"primary",disabled:!a,loading:g,icon:r.a.createElement(N.a,null),htmlType:"submit"},"Submit"),r.a.createElement(k.a.Item,{style:{marginTop:"2em"}},r.a.createElement(G.a,{checkedChildren:"Testing",unCheckedChildren:"Testing",onChange:function(e){return re(Object(u.a)(Object(u.a)({},ne),{},{testing:e}))}})))),r.a.createElement(C.a,{title:"Add Menu Item",visible:D,onCancel:function(){return x(!1)},footer:null},r.a.createElement(k.a,{onFinish:oe},r.a.createElement(k.a.Item,{label:"Category"},r.a.createElement(R.a,{dataSource:me,onChange:function(e){return H(Object(u.a)(Object(u.a)({},z),{},{category:e}))},value:z.category,autoFocus:!0})),r.a.createElement(k.a.Item,{label:"Name"},r.a.createElement(B.a,{onChange:function(e){return H(Object(u.a)(Object(u.a)({},z),{},{name:e.target.value}))},value:z.name})),r.a.createElement(k.a.Item,{label:"Cost"},r.a.createElement(B.a,{type:"number",prefix:"$",onChange:function(e){return H(Object(u.a)(Object(u.a)({},z),{},{cost:e.target.value}))},value:z.cost})),r.a.createElement(S.a,{type:"primary",loading:b,icon:r.a.createElement(I.a,null),htmlType:"submit",disabled:!a},"Submit"),W&&r.a.createElement(j.a,null,r.a.createElement(he,{type:"danger"},W.message)))))};function ye(e){var t=e.who,a=e.formData,n=e.setFormData,c=e.menu,i=e.menuCategories;return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a.Item,{label:"What did ".concat(t.replace(/^(.)/,(function(e){return e.toUpperCase()}))," order?"),colon:!1},r.a.createElement(z.a,{onChange:function(e){return n(Object(u.a)(Object(u.a)({},a),{},Object(Q.a)({},t,Object(u.a)(Object(u.a)({},a[t]),{},{menu_id:e}))))},defaultValue:"Did not eat"},r.a.createElement(Ee,{key:"groupNothing",label:"Did not eat"},r.a.createElement(ge,{key:"nothing",value:0},"Did not eat")),i.map((function(e){return r.a.createElement(Ee,{key:e,label:e},c.map((function(t){return t.category===e&&t.active&&r.a.createElement(ge,{key:t.id,value:t.id},t.name," - $",t.cost)})))})))))}var pe=a(541),be=function(e){e.restart,e.ids,e.addService,e.homeService;var t=Object(P.useService)(Y),a=Object(s.a)(t,2)[1];return r.a.createElement(j.a,{align:"middle"},r.a.createElement(pe.a,{status:"success",title:"Successfully Added!",extra:[r.a.createElement(S.a,{type:"primary",key:"console",onClick:function(){return a("ANALYTICS")}},"Go Analytics"),r.a.createElement(S.a,{key:"buy",onClick:function(){return a("RESTART")}},"Add more")]}))},ve=function(e){var t=e.authState,a=Object(P.useService)(Y),c=Object(s.a)(a,1)[0],i=Object(n.useState)(),l=Object(s.a)(i,2),o=l[0],u=l[1];return r.a.createElement(r.a.Fragment,null,c.matches({add:"pageone"})&&r.a.createElement(Ae,{confirmSave:function(e){return u(e)},authState:t}),c.matches({add:"success"})&&r.a.createElement(be,{ids:o}))},we=a(152),je=a(534),Oe=v.a.Title,De=v.a.Text,Ce=function(e){var t=e.mealsData,a=e.who,c=Object(n.useMemo)((function(){return function(e,t){var a=e.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{weekId:"".concat(F()(e.date,"DD-MM-YYYY").year()).concat(F()(e.date,"DD-MM-YYYY").format("ww"))})})).filter((function(e){return"both"===t||t===e.who})),n=-1*a.reduce((function(e,t){return e+t.incidentals}),0),r=a.map((function(e){return e.menu.cost})),c="both"===t?-798:-399,i=a.length,l=10*i,o=c+l,s=r.reduce((function(e,t){return e+t}));return{spend:c+n,position:o,totalMeals:i,savings:l,totalMenuCost:s}}(t,a)}),[t,a]),i=c.position,l=c.spend,o=c.totalMeals,s=c.savings,m=c.totalMenuCost,d=o/(F()().diff(F()("15/01/2020","DD-MM-YYYY"),"day")/7),f={justify:"center",gutter:10},h={span:12};return r.a.createElement(j.a,{justify:"center"},r.a.createElement(O.a,{xs:24,md:18},r.a.createElement(j.a,f,r.a.createElement(O.a,{span:24},r.a.createElement(je.a,{title:r.a.createElement(De,{strong:!0},"Total Savings"),bordered:!1},r.a.createElement(Oe,{type:"secondary",level:2},"$",i)))),r.a.createElement(j.a,f,r.a.createElement(O.a,h,r.a.createElement(je.a,{title:r.a.createElement(De,{strong:!0},"Internal costs saved"),size:"small",bordered:!1},r.a.createElement(Oe,{type:"secondary",level:4},"$",s))),r.a.createElement(O.a,h,r.a.createElement(je.a,{title:r.a.createElement(De,{strong:!0},"Total Actual Spend"),size:"small",bordered:!1},r.a.createElement(Oe,{type:"secondary",level:4},"$",l)))),r.a.createElement(j.a,f,r.a.createElement(O.a,h,r.a.createElement(je.a,{title:r.a.createElement(De,{strong:!0},"ROI"),size:"small",bordered:!1},r.a.createElement(Oe,{type:"secondary",level:4},parseInt(i/(-1*l)*100),"%"))),r.a.createElement(O.a,h,r.a.createElement(je.a,{title:r.a.createElement(De,{strong:!0},"Avg meals"),size:"small",bordered:!1},r.a.createElement(Oe,{type:"secondary",level:4},d.toFixed(1)," / wk")))),r.a.createElement(j.a,f,r.a.createElement(O.a,h,r.a.createElement(je.a,{title:r.a.createElement(De,{strong:!0},"Cost to FF"),size:"small",bordered:!1},r.a.createElement(Oe,{type:"secondary",level:4},"$",m))),r.a.createElement(O.a,h,r.a.createElement(je.a,{title:r.a.createElement(De,{strong:!0},"FF p/l"),size:"small",bordered:!1},r.a.createElement(Oe,{type:"secondary",level:4},"$",-1*l-m))))))};var ke=a(35),Be=a(62),Se=function(e){var t=e.mealsData,a=e.who,c=Object(n.useMemo)((function(){return function(e,t){for(var a=F()(),n=F()("2020-01-15"),r=a.diff(n,"weeks"),c=[],i=-1;i<=r;i++)c.push(i);var l=e.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{week:F()(e.date,"DD-MM-YYYY").diff(n,"weeks")})})).filter((function(e){return"both"===t||t===e.who})),o="both"===t?-798:-399;return c.map((function(e){if(-1===e)return{week:e,quantity:0,netPosition:0};var t=l.filter((function(t){return e===t.week})),a=t.length,n=10*a,r=t.reduce((function(e,t){return e+t.incidentals}),0),c=o-r+n;return o=c,{week:e,quantity:a,netPosition:c}}))}(t,a)}),[t,a]);return r.a.createElement(j.a,{justify:"center"},r.a.createElement(ke.i,{width:"100%",height:300},r.a.createElement(ke.d,{data:c,margin:{top:0,right:-20,bottom:0,left:-20}},r.a.createElement(ke.j,null),r.a.createElement(ke.e,{verticalAlign:"top",wrapperStyle:{top:"-1em"}}),r.a.createElement(ke.k,{dataKey:"week",interval:2,padding:{left:15,right:15},label:{value:"Weeks since start",position:"insideBottom",offset:0}}),r.a.createElement(ke.l,{yAxisId:"left",dataKey:"quantity",label:{value:"Meal count",angle:-90}}),r.a.createElement(ke.l,{yAxisId:"right",dataKey:"netPosition",orientation:"right",label:{value:"Net Position",angle:90},axisLine:!0}),r.a.createElement(ke.a,{yAxisId:"left",fill:Be.blue[5],dataKey:"quantity",barSize:5,name:"# of Meals"}),r.a.createElement(ke.f,{yAxisId:"right",type:"monotone",dataKey:"netPosition",stroke:Be.gold[5],name:"Net $",dot:!1}))))};var Ie=[Be.volcano[5],Be.gold[5],Be.blue[5],Be.green[5],Be.yellow[5]],Pe=[Be.green[5],Be.volcano[5]],xe=function(e){var t=e.mealsData,a=e.who,c=Object(n.useMemo)((function(){return function(e,t){return Object(U.a)(new Set(e.map((function(e){return e.menu.category})))).sort().map((function(a){var n=e.map((function(e){if(a===e.menu.category){if("both"===t)return 1;if(e.shared)return.5;if(t===e.who)return 1}return 0})).reduce((function(e,t){return e+t}));return{name:a,quantity:n}}))}(t,a)}),[t,a]),i=Object(n.useMemo)((function(){return function(e,t){return["Veggies","Non"].map((function(a){var n=e.map((function(e){if("Veggies"===a&&("Salad"===e.menu.category||"Zoodle"===e.menu.category)||"Non"===a&&("Pizza"===e.menu.category||"Pasta"===e.menu.category||"Other"===e.menu.category)){if("both"===t)return 1;if(e.shared)return.5;if(t===e.who)return 1}return 0})).reduce((function(e,t){return e+t}));return{name:a,quantity:n}}))}(t,a)}),[t,a]);return r.a.createElement(j.a,null,r.a.createElement(O.a,{span:24},r.a.createElement(j.a,{justify:"center"},r.a.createElement(ke.i,{width:"100%",height:300},r.a.createElement(ke.h,{margin:{top:5,right:0,bottom:5,left:0}},r.a.createElement(ke.g,{dataKey:"quantity",data:c,label:!0,innerRadius:75,outerRadius:100,paddingAngle:5},c.map((function(e,t){return r.a.createElement(ke.c,{key:e.name,fill:Ie[t%Ie.length]})}))),r.a.createElement(ke.j,null),r.a.createElement(ke.e,{verticalAlign:"top",wrapperStyle:{top:"-1em"}})))),r.a.createElement(j.a,{justify:"center"},r.a.createElement(ke.i,{width:"100%",height:300},r.a.createElement(ke.h,{margin:{top:5,right:0,bottom:5,left:0}},r.a.createElement(ke.g,{dataKey:"quantity",data:i,label:!0,innerRadius:75,outerRadius:100,paddingAngle:5},i.map((function(e,t){return r.a.createElement(ke.c,{key:e.name,fill:Pe[t%Pe.length]})}))),r.a.createElement(ke.j,null),r.a.createElement(ke.e,{verticalAlign:"top",wrapperStyle:{top:"-1em"}}))))))};var Me=function(e){var t=e.mealsData,a=e.who,c=Object(n.useMemo)((function(){return function(e,t){var a=e.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{day:F()(e.date,"DD-MM-YYYY").day()})})),n=window.innerWidth<500?["S","M","T","W","T","F","S"]:["Sun","Mon","Tue","Wed","Thur","Fri","Sat"],r=a.filter((function(e){return"both"===t||t===e.who}));return n.map((function(e,t){return{day:n[t],lunch:r.filter((function(e){return e.day===t&&!e.isDinner})).length,dinner:r.filter((function(e){return e.day===t&&e.isDinner})).length}}))}(t,a)}),[t,a]);return r.a.createElement(j.a,{justify:"center"},r.a.createElement(ke.i,{width:"100%",height:300},r.a.createElement(ke.b,{data:c},r.a.createElement(ke.j,null),r.a.createElement(ke.e,{verticalAlign:"top",wrapperStyle:{top:"-1em"}}),r.a.createElement(ke.k,{dataKey:"day"}),r.a.createElement(ke.l,null),r.a.createElement(ke.a,{stackId:"a",units:"meals",fill:Be.blue[5],dataKey:"dinner",barSize:20,name:"Number of dinners"}),r.a.createElement(ke.a,{stackId:"a",units:"meals",fill:Be.gold[5],dataKey:"lunch",barSize:20,name:"Number of lunches"}))))};var Ye=a(537),Qe=v.a.Text,Ue=function(e){var t=e.mealsData,a=e.who,c=e.authState,i=Object(n.useState)(!1),l=Object(s.a)(i,2),o=l[0],u=l[1],m=Object(q.b)(ue),d=m.data,f=m.loading,h=Object(q.a)(ee),g=Object(s.a)(h,1)[0];if(o&&f)return r.a.createElement(de,null);var E=Ne(o?d.meals:t,a);return r.a.createElement(j.a,null,r.a.createElement(O.a,{sm:{span:18,offset:3},xs:{span:24}},r.a.createElement(j.a,{type:"flex",justify:"end"},r.a.createElement(G.a,{key:"switch",checkedChildren:"Testing",unCheckedChildren:"Testing",checked:o,onChange:function(e){return u(e)}})),r.a.createElement(Ye.b,{itemLayout:"horizontal",dataSource:E,renderItem:function(e){return r.a.createElement(Ye.b.Item,{actions:[r.a.createElement("p",{key:e.id,onClick:function(t){!function(e,t){t.preventDefault(),c?window.confirm("Are you sure you want to delete ?")&&g({variables:{id:e},refetchQueries:[{query:ie},{query:ue}]}):alert("You must be logged in to do this")}(e.id,t)}},"Delete")]},r.a.createElement(Ye.b.Item.Meta,{title:e.title,description:e.description}))}})))};function Ne(e,t){return e.filter((function(e){return"both"===t||e.shared||e.who===t})).map((function(e){return Object(u.a)(Object(u.a)({},e),{},{date:F()(e.date,"DD-MM-YYYY").toDate()})})).sort((function(e,t){return t.date-e.date})).map((function(e){var t=e.date.toDateString();return{title:"".concat(e.shared?"Shared":e.who," on ").concat(t),description:r.a.createElement(Qe,null,e.menu.category,": ",e.menu.name," - $",e.menu.cost,e.test?r.a.createElement(Qe,{type:"danger"}," - TESTING"):""),id:e.id}}))}var ze=function(e){var t=e.mealsData,a=e.who,c=Object(n.useState)("quantity"),i=Object(s.a)(c,2),l=i[0],o=i[1],m=Object(n.useState)("all"),d=Object(s.a)(m,2),f=d[0],h=d[1],g="all"===f?["Salad","Pasta","Pizza","Zoodle"]:[f],E=Object(q.b)(oe,{variables:{category:g}}).data;if(!E||!t)return r.a.createElement(de,null);var A=function(e,t,a,n){var r=e.map((function(e){var n=t.filter((function(t){return t.menu.name===e.name})),r=n.map((function(e){return"both"===a?1:e.shared?.5:a===e.who?1:0})),c=r.length>0?r.reduce((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return e+t})):0,i=n.reduce((function(e,t){var a=F()(t.date,"DD-MM-YYYY").toDate();return e<a?a:e}),F()("01/01/2020","DD-MM-YYYY").toDate());return Object(u.a)(Object(u.a)({},e),{},{key:e.id,quantity:c,last:c?i:"",active:e.active})}));switch(n){case"last":return r.sort((function(e,t){return t.last-e.last}));case"quantity":return r.sort((function(e,t){return t.quantity-e.quantity}));default:return r.sort((function(e,t){return e[n].localeCompare(t[n])}))}}(E.menu,t,a,l);return r.a.createElement(k.a,{layout:"horizontal"},r.a.createElement(j.a,{justify:"space-around"},r.a.createElement(O.a,{xs:8,sm:8},r.a.createElement(k.a.Item,{label:"Menu"},r.a.createElement(z.a,{onChange:function(e){return h(e)},value:f,size:"small"},r.a.createElement(z.a.Option,{value:"all"},"All"),r.a.createElement(z.a.Option,{value:"Salad"},"Salad"),r.a.createElement(z.a.Option,{value:"Pasta"},"Pasta"),r.a.createElement(z.a.Option,{value:"Pizza"},"Pizza"),r.a.createElement(z.a.Option,{value:"Zoodle"},"Zoodle")))),r.a.createElement(O.a,{xs:8,sm:8},r.a.createElement(k.a.Item,{label:"Sort"},r.a.createElement(z.a,{onChange:function(e){return o(e)},value:l,size:"small"},r.a.createElement(z.a.Option,{value:"quantity"},"Quantity"),r.a.createElement(z.a.Option,{value:"last"},"Last Eaten"),r.a.createElement(z.a.Option,{value:"name"},"Name"))))),r.a.createElement(j.a,{justify:"center"},r.a.createElement(O.a,{xs:22,sm:18},r.a.createElement(Ye.b,{itemLayout:"horizontal",dataSource:A,renderItem:function(e){return r.a.createElement(Ye.b.Item,{actions:[r.a.createElement(G.a,{key:"switch",size:"small",checkedChildren:"Active",unCheckedChildren:"Active",checked:e.active,disabled:!0})]},r.a.createElement(Ye.b.Item.Meta,{title:e.name,description:"Eaten ".concat(e.quantity," time").concat(e.quantity>1?"s":"",".").concat(e.last&&" Last eaten on ".concat(e.last.toDateString(),"."))}))}}))))};var Te=v.a.Text,Ge=v.a.Title,Re={summary:"Summary",history:"History",split:"Meal Split",weekdays:"Weekday Split",meals:"Meals List",menu:"Menu Summary"},He=function(e){var t=e.authState,a=Object(q.b)(ie),c=a.data,i=a.error,l=Object(P.useService)(Y),o=Object(s.a)(l,2),u=o[0],m=o[1],d=Object(n.useState)("both"),f=Object(s.a)(d,2),h=f[0],g=f[1];if(i)return console.error(i),r.a.createElement(Te,{type:"danger"},"Hasura error, see Console");if(!c)return r.a.createElement(de,null);var E=c.meals;return r.a.createElement(j.a,null,r.a.createElement(O.a,{span:24},r.a.createElement(w.b,{direction:"vertical",size:"small",style:{width:"100%"}},r.a.createElement(j.a,{justify:"space-between"},r.a.createElement(O.a,{span:4,style:{textAlign:"center"}},r.a.createElement(S.a,{icon:r.a.createElement(we.a,null),onClick:function(){return m("PREVIOUS")}})),r.a.createElement(O.a,{span:16,style:{textAlign:"center"}},r.a.createElement(Ge,{level:4},Re[u.value.analytics])),r.a.createElement(O.a,{span:4,style:{textAlign:"center"}},r.a.createElement(S.a,{icon:r.a.createElement(N.a,null),onClick:function(){return m("NEXT")}}))),r.a.createElement(j.a,{style:{marginTop:8,marginBottom:8}},r.a.createElement(O.a,{sm:{offset:3}},r.a.createElement(z.a,{defaultValue:h,onChange:function(e){return g(e)},size:"small"},r.a.createElement(z.a.Option,{value:"both"},"Both"),r.a.createElement(z.a.Option,{value:"Katie"},"Katie"),r.a.createElement(z.a.Option,{value:"Chris"},"Chris")))),r.a.createElement(j.a,null,r.a.createElement(O.a,{span:24},u.matches({analytics:"summary"})&&r.a.createElement(Ce,{mealsData:E,who:h}),u.matches({analytics:"history"})&&r.a.createElement(Se,{mealsData:E,who:h}),u.matches({analytics:"split"})&&r.a.createElement(xe,{mealsData:E,who:h}),u.matches({analytics:"weekdays"})&&r.a.createElement(Me,{mealsData:E,who:h}),u.matches({analytics:"meals"})&&r.a.createElement(Ue,{mealsData:E,who:h,authState:t}),u.matches({analytics:"menu"})&&r.a.createElement(ze,{mealsData:E,who:h}))))))},Fe=a(305),qe=a.n(Fe),Je=Object(n.createContext)({token:null,isAuthenticating:!1,isAuthenticated:!1,updateAuth:function(){},signIn:function(){},signOut:function(){}}),Le=v.a.Title,We=v.a.Text,Ke=function(){var e=Object(P.useService)(Y),t=Object(s.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(!1),m=Object(s.a)(i,2),d=m[0],f=m[1],h=Object(n.useState)({}),g=Object(s.a)(h,2),E=g[0],A=g[1],y=Object(n.useState)(),v=Object(s.a)(y,2),x=v[0],M=v[1],Q=Object(n.useState)(!1),U=Object(s.a)(Q,2),N=U[0],z=U[1],T=Object(n.useContext)(Je),G=T.signIn,R=T.signOut,H=T.isAuthenticated,F=function(){var e=Object(o.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(!1),t=E.email,a=E.password,e.prev=2,z(!0),e.next=6,G(t,a);case 6:f(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),M(e.t0),A(Object(u.a)(Object(u.a)({},E),{},{password:""}));case 13:return e.prev=13,z(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,9,13,16]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.b,{direction:"vertical",size:"middle",style:{width:"100%"}},r.a.createElement(j.a,{align:"middle",justify:"start"},r.a.createElement(O.a,{sm:{span:2,offset:1},xs:{span:4,offset:1}},r.a.createElement("img",{src:qe.a,style:{width:"75%"},alt:"Site logo, knife and fork"})),r.a.createElement(O.a,{sm:20,xs:18},r.a.createElement(Le,{style:{marginBottom:"0"}},"Penne Pinching"))),r.a.createElement(j.a,null,r.a.createElement(O.a,{span:24},r.a.createElement(D.a,{selectedKeys:Object.keys(a.value),mode:"horizontal",onClick:function(e){return function(e){"add"===e&&c("ADD"),"analytics"===e&&c("ANALYTICS"),"login"===e&&f(!0),"logout"===e&&R()}(e.key)}},r.a.createElement(D.a.Item,{key:"add"},r.a.createElement(p.a,null),"Add"),r.a.createElement(D.a.Item,{key:"analytics"},r.a.createElement(b.a,null),"Analytics"),H&&r.a.createElement(D.a.Item,{key:"logout"},"Log out"),!H&&r.a.createElement(D.a.Item,{key:"login"},"Log in")))),r.a.createElement(j.a,{justify:"center"},r.a.createElement(O.a,{span:20},a.matches("add")&&r.a.createElement(ve,{authState:H}),a.matches("analytics")&&r.a.createElement(He,{authState:H})))),r.a.createElement(C.a,{title:"Log In",visible:d,onCancel:function(){return f(!1)},footer:null},r.a.createElement(k.a,{onFinish:F},r.a.createElement(k.a.Item,{label:"Email"},r.a.createElement(B.a,{onChange:function(e){return A(Object(u.a)(Object(u.a)({},E),{},{email:e.target.value}))},value:E.email,autoFocus:!0})),r.a.createElement(k.a.Item,{label:"Password"},r.a.createElement(B.a.Password,{onChange:function(e){return A(Object(u.a)(Object(u.a)({},E),{},{password:e.target.value}))},value:E.password})),r.a.createElement(S.a,{loading:N,icon:r.a.createElement(I.a,null),htmlType:"submit"},"Submit"),x&&r.a.createElement(j.a,null,r.a.createElement(We,{type:"danger"},x.message)))))},Xe=function(){var e=Object(n.useState)(),t=Object(s.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(),f=Object(s.a)(i,2),A=f[0],p=f[1],b=Object(n.useState)({token:null,isAuthenticating:!0,isAuthenticated:!1,updateAuth:function(e){return j((function(t){return Object(u.a)(Object(u.a)({},t),e)}))},signIn:function(){var e=Object(o.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.auth().signInWithEmailAndPassword(t,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),signOut:function(){h.a.auth().signOut(),A&&A.purge()}}),v=Object(s.a)(b,2),w=v[0],j=v[1],O=w.token,D=w.updateAuth;return Object(n.useEffect)((function(){function e(){return(e=Object(o.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new E.a,a=new g.a({storage:new g.b(y.a),debug:!0,trigger:"write",cache:t}),e.next=4,a.restore();case 4:p(a),c(new d.a({uri:"https://penne-pinching.herokuapp.com/v1/graphql",headers:O?{Authorization:"Bearer ".concat(O)}:{},cache:t}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return e.apply(this,arguments)})().catch(console.error)}),[O]),Object(n.useEffect)((function(){return h.a.auth().onAuthStateChanged(function(){var e=Object(o.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D({isAuthenticating:!0}),!t){e.next=12;break}return e.next=4,t.getIdToken();case 4:return a=e.sent,e.next=7,t.getIdTokenResult();case 7:n=e.sent,r=n.claims["https://hasura.io/jwt/claims"],D(r?{token:a}:{token:null}),e.next=13;break;case 12:D({token:null});case 13:D({isAuthenticating:!1});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(n.useEffect)((function(){D(O?{isAuthenticated:!0}:{isAuthenticated:!1})}),[O]),a?r.a.createElement("div",{id:"app"},r.a.createElement(Je.Provider,{value:w},r.a.createElement(m.a,{client:a},r.a.createElement(Ke,null)))):null},Ze=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ve(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){return console.error("Error during service worker registration:",e)}))}a(527);h.a.initializeApp({apiKey:"AIzaSyCQj8TxcSIRvXVOfZyWwbWe1w11cxxFiIw",authDomain:"penne-pinching.firebaseapp.com",databaseURL:"https://penne-pinching.firebaseio.com",projectId:"penne-pinching",storageBucket:"penne-pinching.appspot.com",messagingSenderId:"305728508038",appId:"1:305728508038:web:ab5a360f93018d34fac107"}),fetch("https://penne-pinching.herokuapp.com/");var _e,$e=document.getElementById("root");$e.hasChildNodes()?Object(c.hydrate)(r.a.createElement(Xe,null),$e):Object(c.render)(r.a.createElement(Xe,null),$e),"serviceWorker"in navigator&&window.addEventListener("load",(function(){var e="".concat(window.location.href,"service-worker.js");Ze?(function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){return e.unregister().then((function(){return window.location.reload()}))})):Ve(e,t)})).catch((function(){return console.log("No internet connection found. App is running in offline mode.")}))}(e,_e),navigator.serviceWorker.ready.then((function(){return console.log("This web app is being served cache-first by a service worker.")}))):Ve(e,_e)}))}},[[335,1,2]]]);
//# sourceMappingURL=main.957c00f0.chunk.js.map