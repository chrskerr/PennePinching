(this["webpackJsonppenne-pinching"]=this["webpackJsonppenne-pinching"]||[]).push([[0],{338:function(e,t){e.exports="data:image/png;base64,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"},363:function(e,t,a){e.exports=a(657)},657:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),i=a(53),l=a.n(i),u=a(88),o=a(14),s=a(23),m=a(41),d=a(342),f=a(120),E=a.n(f),h=(a(373),a(676)),g=a(672),A=a(667),y=a(661),p=a(124),b=a(63),v=a(663),w=a(666),j=a(668),O=a(670),D=a(70),C=a(675),k=a(67),B=a(142),I=a(189),P=Object(B.b)(new I.a({id:"home",initial:"analytics",states:{add:{on:{ANALYTICS:"analytics"},initial:"pageone",states:{pageone:{on:{SUCCESS:"success"}},success:{on:{RESTART:"pageone"}}}},analytics:{on:{ADD:"add"},initial:"summary",states:{summary:{on:{PREVIOUS:"meals",NEXT:"history"}},history:{on:{PREVIOUS:"summary",NEXT:"split"}},split:{on:{PREVIOUS:"history",NEXT:"menu"}},menu:{on:{PREVIOUS:"split",NEXT:"weekdays"}},weekdays:{on:{PREVIOUS:"menu",NEXT:"meals"}},meals:{on:{PREVIOUS:"weekdays",NEXT:"summary"}}}}}})).start(),S=a(162),x=a(119),Y=a(673),M=a(80),Q=a(662),U=a(674),z=a(660),N=a(26),T=a.n(N),G=a(57),R=a(61),H=a(51),F=a.n(H);function q(){var e=Object(R.a)(["\n    mutation MyMutation($id: uuid!) {\n        delete_meals(where: {id: {_eq: $id}}) {\n            returning {\n                id\n            }\n        }\n    }\n"]);return q=function(){return e},e}function J(){var e=Object(R.a)(["\n    mutation InsertMenuItem($data: [ menu_insert_input! ]! ) {\n        insert_menu(objects: $data ) {\n            returning {\n                id\n            }\n        }\n    }\n"]);return J=function(){return e},e}function K(){var e=Object(R.a)(['\n    mutation UpdateMeals($id: UUID!, $data: [ meals_update_input! ]! ) {\n        update_meals(where: {id: {_eq: "" }}, _set: $data ) {\n            returning {\n                id\n            }\n        }\n    }\n']);return K=function(){return e},e}function L(){var e=Object(R.a)(["\n    mutation InsertMeals($data: [ meals_insert_input! ]! ) {\n        insert_meals(objects: $data ) {\n            returning {\n                id\n            }\n        }\n    }\n"]);return L=function(){return e},e}var W=F()(L()),X=(F()(K()),F()(J())),Z=F()(q());function V(){var e=Object(R.a)(["\n    query GetTestingMeals {\n        meals {\n            id\n            date\n            menu {\n                category\n                cost\n                name\n            }\n            shared\n            who\n            isDinner\n            incidentals\n            test\n        }\n    }\n"]);return V=function(){return e},e}function _(){var e=Object(R.a)(["\n    query GetFilteredMenu($category: [String!] ) {\n        menu(where: {category: {_in: $category}}) {\n            active\n            cost\n            name\n            id\n            active\n        }\n    }\n"]);return _=function(){return e},e}function $(){var e=Object(R.a)(["\n    query GetFilteredMeals($category: String! ) {\n        meals(where: {test: {_eq: false}, menu: {category: {_eq: $category}}}) {\n            date\n            menu {\n                name\n            }\n            shared\n            who\n        }\n    }\n"]);return $=function(){return e},e}function ee(){var e=Object(R.a)(["\n    query GetMenu {\n        menu {\n            category\n            cost\n            id\n            name\n            active\n        }\n    }\n"]);return ee=function(){return e},e}function te(){var e=Object(R.a)(["\n    query GetAllMeals {\n        meals(where: {test: {_eq: false}}) {\n            id\n            date\n            menu {\n                category\n                cost\n                name\n            }\n            shared\n            who\n            isDinner\n            incidentals\n            test\n        }\n    }\n"]);return te=function(){return e},e}var ae=F()(te()),ne=F()(ee()),re=(F()($()),F()(_())),ce=F()(V()),ie=a(301),le={position:"fixed",top:0,left:0,width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",zIndex:-1},ue=function(){return r.a.createElement("div",{style:le},r.a.createElement(ie.a,{size:"large"}))},oe=A.a.Title,se=A.a.Text,me=M.a.Option,de=M.a.OptGroup,fe=function(e){var t=e.confirmSave,a=e.authState,c=Object(k.useService)(P),i=Object(s.a)(c,2)[1],m=Object(G.b)(ne).data,d=Object(G.a)(W),f=Object(s.a)(d,2),E=f[0],g=f[1].loading,A=Object(G.a)(X),y=Object(s.a)(A,2),v=y[0],B=y[1].loading,I=Object(n.useState)(!1),S=Object(s.a)(I,2),M=S[0],N=S[1],R=Object(n.useState)({category:"",name:"",cost:null}),H=Object(s.a)(R,2),F=H[0],q=H[1],J=Object(n.useState)(!1),K=Object(s.a)(J,2),L=K[0],Z=K[1],V=Object(n.useState)(!1),_=Object(s.a)(V,2),$=_[0],ee=_[1],te=Object(n.useState)({date:T()((new Date).toLocaleDateString(),"DD-MM-YYYY")._i,katie:{menu_id:""},chris:{menu_id:""},shared:!0,testing:!1,isDinner:!0,incidentals:null}),re=Object(s.a)(te,2),ce=re[0],ie=re[1],le=function(){var e=Object(u.a)(l.a.mark((function e(){var a,n,r,c,u,o,s,m,d,f,h;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ee(!1),a=ce.date,n=ce.shared,r=ce.katie,c=ce.chris,u=ce.testing,o=ce.isDinner,s=ce.incidentals,m=!(r.menu_id&&!c.menu_id||!r.menu_id&&c.menu_id)&&n,d=s?r.menu_id&&c.menu_id?s/2:s:0,f=[],r.menu_id&&f.push({menu_id:r.menu_id,shared:m,who:"Katie",date:a,test:u,isDinner:o,incidentals:d}),c.menu_id&&f.push({menu_id:c.menu_id,shared:m,who:"Chris",date:a,test:u,isDinner:o,incidentals:d}),!f.length){e.next=19;break}return e.prev=8,e.next=11,E({variables:{data:f},refetchQueries:[{query:ae}]});case 11:h=e.sent,t(h.data.insert_meals.returning),i("SUCCESS"),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(8),ee(!0);case 19:case"end":return e.stop()}}),e,null,[[8,16]])})));return function(){return e.apply(this,arguments)}}(),me=function(){var e=Object(u.a)(l.a.mark((function e(){var t,a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=F.category,a=F.cost,n=F.name,Z(!1),t&&a&&n){e.next=6;break}Z("Fields missing"),e.next=16;break;case 6:return e.prev=6,e.next=9,v({variables:{data:[F]},refetchQueries:[{query:ne}],awaitRefetchQueries:!0});case 9:N(!1),q({category:"",name:"",cost:""}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),console.error(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(){return e.apply(this,arguments)}}();if(!m)return r.a.createElement(ue,null);var de=m.menu,fe=de.sort((function(e,t){return e.name<t.name?-1:1})),he=Object(x.a)(new Set(de.map((function(e){return e.category})))).sort();return r.a.createElement(p.a,null,r.a.createElement(b.a,{span:24},r.a.createElement(p.a,{justify:"space-between"},r.a.createElement(b.a,{span:18},r.a.createElement(p.a,{type:"flex",justify:"start"},r.a.createElement(oe,{level:4},"Add a New Meal"))),r.a.createElement(b.a,{span:6},r.a.createElement(p.a,{type:"flex",justify:"end"},r.a.createElement(D.a,{icon:r.a.createElement(h.a,null),onClick:function(){return N(!0)}},"Menu")))),$&&r.a.createElement(se,{type:"danger"},"Something went wrong..."),!a&&r.a.createElement(se,{type:"warning"},"Please log in to make any changes"),r.a.createElement(j.a,{onFinish:le,labelAlign:"left"},r.a.createElement(j.a.Item,{label:"Date"},r.a.createElement(Q.a,{format:"DD-MM-YYYY",defaultValue:T()((new Date).toLocaleDateString(),"DD-MM-YYYY"),onChange:function(e){return ie(Object(o.a)(Object(o.a)({},ce),{},{date:e._d.toLocaleDateString()}))}})),r.a.createElement(Ee,{who:"katie",setFormData:ie,formData:ce,menu:fe,menuCategories:he}),r.a.createElement(Ee,{who:"chris",setFormData:ie,formData:ce,menu:fe,menuCategories:he}),r.a.createElement(p.a,{gutter:16},r.a.createElement(b.a,{xs:8,sm:4,md:4,lg:4,xl:4},r.a.createElement(j.a.Item,null,r.a.createElement(U.a,{checkedChildren:"Dinner",unCheckedChildren:"Lunch",defaultChecked:!0,onChange:function(e){return ie(Object(o.a)(Object(o.a)({},ce),{},{isDinner:e}))}}))),r.a.createElement(b.a,{xs:8,sm:4,md:4,lg:4,xl:4},r.a.createElement(j.a.Item,null,r.a.createElement(U.a,{checkedChildren:"Shared",unCheckedChildren:"Shared",defaultChecked:!0,onChange:function(e){return ie(Object(o.a)(Object(o.a)({},ce),{},{shared:e}))}})))),r.a.createElement(D.a,{type:"primary",disabled:!a,loading:g,icon:r.a.createElement(Y.a,null),htmlType:"submit"},"Submit"),r.a.createElement(j.a.Item,{style:{marginTop:"2em"}},r.a.createElement(U.a,{checkedChildren:"Testing",unCheckedChildren:"Testing",onChange:function(e){return ie(Object(o.a)(Object(o.a)({},ce),{},{testing:e}))}})))),r.a.createElement(w.a,{title:"Add Menu Item",visible:M,onCancel:function(){return N(!1)},footer:null},r.a.createElement(j.a,{onFinish:me},r.a.createElement(j.a.Item,{label:"Category"},r.a.createElement(z.a,{dataSource:he,onChange:function(e){return q(Object(o.a)(Object(o.a)({},F),{},{category:e}))},value:F.category,autoFocus:!0})),r.a.createElement(j.a.Item,{label:"Name"},r.a.createElement(O.a,{onChange:function(e){return q(Object(o.a)(Object(o.a)({},F),{},{name:e.target.value}))},value:F.name})),r.a.createElement(j.a.Item,{label:"Cost"},r.a.createElement(O.a,{type:"number",prefix:"$",onChange:function(e){return q(Object(o.a)(Object(o.a)({},F),{},{cost:e.target.value}))},value:F.cost})),r.a.createElement(D.a,{type:"primary",loading:B,icon:r.a.createElement(C.a,null),htmlType:"submit",disabled:!a},"Submit"),L&&r.a.createElement(p.a,null,r.a.createElement(se,{type:"danger"},L.message)))))};function Ee(e){var t=e.who,a=e.formData,n=e.setFormData,c=e.menu,i=e.menuCategories;return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a.Item,{label:"What did ".concat(t.replace(/^(.)/,(function(e){return e.toUpperCase()}))," order?"),colon:!1},r.a.createElement(M.a,{onChange:function(e){return n(Object(o.a)(Object(o.a)({},a),{},Object(S.a)({},t,Object(o.a)(Object(o.a)({},a[t]),{},{menu_id:e}))))},defaultValue:"Did not eat"},r.a.createElement(de,{key:"groupNothing",label:"Did not eat"},r.a.createElement(me,{key:"nothing",value:0},"Did not eat")),i.map((function(e){return r.a.createElement(de,{key:e,label:e},c.map((function(t){return t.category===e&&t.active&&r.a.createElement(me,{key:t.id,value:t.id},t.name," - $",t.cost)})))})))))}var he=a(669),ge=function(e){e.restart,e.ids,e.addService,e.homeService;var t=Object(k.useService)(P),a=Object(s.a)(t,2)[1];return r.a.createElement(p.a,{align:"middle"},r.a.createElement(he.a,{status:"success",title:"Successfully Added!",extra:[r.a.createElement(D.a,{type:"primary",key:"console",onClick:function(){return a("ANALYTICS")}},"Go Analytics"),r.a.createElement(D.a,{key:"buy",onClick:function(){return a("RESTART")}},"Add more")]}))},Ae=function(e){var t=e.authState,a=Object(k.useService)(P),c=Object(s.a)(a,1)[0],i=Object(n.useState)(),l=Object(s.a)(i,2),u=l[0],o=l[1];return r.a.createElement(r.a.Fragment,null,c.matches({add:"pageone"})&&r.a.createElement(fe,{confirmSave:function(e){return o(e)},authState:t}),c.matches({add:"success"})&&r.a.createElement(ge,{ids:u}))},ye=a(671),pe=a(664),be=a(93),ve=a.n(be),we=A.a.Title,je=A.a.Text,Oe=function(e){var t=e.mealsData,a=e.who,c=Object(n.useMemo)((function(){return function(e,t){var a=e.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{weekId:"".concat(T()(e.date,"DD-MM-YYYY").year()).concat(T()(e.date,"DD-MM-YYYY").format("ww"))})})).filter((function(e){return"both"===t||t===e.who})),n=-1*a.reduce((function(e,t){return e+t.incidentals}),0),r=a.map((function(e){return e.menu.cost})),c="both"===t?-798:-399,i=a.length,l=10*i,u=c+l,s=r.reduce((function(e,t){return e+t}));return{spend:c+n,position:u,totalMeals:i,savings:l,totalMenuCost:s}}(t,a)}),[t,a]),i=c.position,l=c.spend,u=c.totalMeals,s=c.savings,m=c.totalMenuCost,d=T()().diff(T()("15/01/2020","DD-MM-YYYY"),"day"),f=-1*i/(s/d),E=f<0?0:f,h=u/(d/7),g={justify:"center",gutter:10},A={span:12};return r.a.createElement(p.a,{justify:"center"},r.a.createElement(b.a,{xs:24,md:18},r.a.createElement(p.a,g,r.a.createElement(b.a,{span:24},r.a.createElement(pe.a,{title:r.a.createElement(je,{strong:!0},"Net Financial Position"),bordered:!1},r.a.createElement(we,{type:"secondary",level:2},r.a.createElement(ve.a,{start:0,end:i,duration:5,prefix:"$"}))))),r.a.createElement(p.a,g,r.a.createElement(b.a,A,r.a.createElement(pe.a,{title:r.a.createElement(je,{strong:!0},"Saved"),size:"small",bordered:!1},r.a.createElement(we,{type:"secondary",level:4},r.a.createElement(ve.a,{start:0,end:s,duration:3,prefix:"$"})))),r.a.createElement(b.a,A,r.a.createElement(pe.a,{title:r.a.createElement(je,{strong:!0},"Spent"),size:"small",bordered:!1},r.a.createElement(we,{type:"secondary",level:4},r.a.createElement(ve.a,{start:0,end:l,duration:3,prefix:"$"}))))),r.a.createElement(p.a,g,r.a.createElement(b.a,A,r.a.createElement(pe.a,{title:r.a.createElement(je,{strong:!0},"Breakeven"),size:"small",bordered:!1},r.a.createElement(we,{type:"secondary",level:4},r.a.createElement(ve.a,{start:0,end:E,duration:3,suffix:" days"})))),r.a.createElement(b.a,A,r.a.createElement(pe.a,{title:r.a.createElement(je,{strong:!0},"Avg meals"),size:"small",bordered:!1},r.a.createElement(we,{type:"secondary",level:4},r.a.createElement(ve.a,{start:0,end:h,duration:3,decimals:1,suffix:" / wk"}))))),r.a.createElement(p.a,g,r.a.createElement(b.a,A,r.a.createElement(pe.a,{title:r.a.createElement(je,{strong:!0},"Cost to FF"),size:"small",bordered:!1},r.a.createElement(we,{type:"secondary",level:4},r.a.createElement(ve.a,{start:0,end:m,duration:3,prefix:"$"})))),r.a.createElement(b.a,A,r.a.createElement(pe.a,{title:r.a.createElement(je,{strong:!0},"FF p/l"),size:"small",bordered:!1},r.a.createElement(we,{type:"secondary",level:4},r.a.createElement(ve.a,{start:-1*l,end:-1*l-m,duration:3,prefix:"$"})))))))};var De=a(22),Ce=a(42),ke=function(e){var t=e.mealsData,a=e.who,c=Object(n.useMemo)((function(){return function(e,t){var a=e.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{weekId:"".concat(T()(e.date,"DD-MM-YYYY").year()).concat(T()(e.date,"DD-MM-YYYY").format("ww"))})})),n=a.filter((function(e){return"both"===t||t===e.who})),r=Object(x.a)(new Set(a.map((function(e){return e.weekId}))));r.unshift("202001","202002");var c="both"===t?-798:-399;return r.sort().map((function(e){var t=n.filter((function(t){return e===t.weekId})),a=t.length,r=10*a,i=t.reduce((function(e,t){return e+t.incidentals}),0),l="202001"===e||"202002"===e?0:c-i+r;return c="202001"===e||"202002"===e?c:l,{weekId:e,week:e.slice(4),year:e.slice(0,4),quantity:a,netPosition:l}}))}(t,a)}),[t,a]);return r.a.createElement(p.a,{justify:"center"},r.a.createElement(De.i,{width:"100%",height:300},r.a.createElement(De.d,{data:c,margin:{top:0,right:-20,bottom:0,left:-20}},r.a.createElement(De.j,null),r.a.createElement(De.e,{verticalAlign:"top",wrapperStyle:{top:"-1em"}}),r.a.createElement(De.k,{dataKey:"week",padding:{left:15,right:15}}),r.a.createElement(De.k,{dataKey:"year",xAxisId:"year",axisLine:!1,interval:12,padding:{left:15,right:15},label:"Week #"}),r.a.createElement(De.l,{yAxisId:"left",dataKey:"quantity"}),r.a.createElement(De.l,{yAxisId:"right",dataKey:"netPosition",orientation:"right"}),r.a.createElement(De.a,{yAxisId:"left",fill:Ce.blue[5],dataKey:"quantity",barSize:10,name:"# of Meals"}),r.a.createElement(De.f,{yAxisId:"right",type:"monotone",dataKey:"netPosition",stroke:Ce.gold[5],name:"Net $"}))))};var Be=[Ce.volcano[5],Ce.gold[5],Ce.blue[5],Ce.green[5]],Ie=[Ce.green[5],Ce.volcano[5]],Pe=function(e){var t=e.mealsData,a=e.who,c=Object(n.useMemo)((function(){return function(e,t){return Object(x.a)(new Set(e.map((function(e){return e.menu.category})))).sort().map((function(a){var n=e.map((function(e){if(a===e.menu.category){if("both"===t)return 1;if(e.shared)return.5;if(t===e.who)return 1}return 0})).reduce((function(e,t){return e+t}));return{name:a,quantity:n}}))}(t,a)}),[t,a]),i=Object(n.useMemo)((function(){return function(e,t){return["Veggies","Non"].map((function(a){var n=e.map((function(e){if("Veggies"===a&&("Salad"===e.menu.category||"Zoodle"===e.menu.category)||"Non"===a&&("Pizza"===e.menu.category||"Pasta"===e.menu.category)){if("both"===t)return 1;if(e.shared)return.5;if(t===e.who)return 1}return 0})).reduce((function(e,t){return e+t}));return{name:a,quantity:n}}))}(t,a)}),[t,a]);return r.a.createElement(p.a,null,r.a.createElement(b.a,{span:24},r.a.createElement(p.a,{justify:"center"},r.a.createElement(De.i,{width:"100%",height:300},r.a.createElement(De.h,{margin:{top:5,right:0,bottom:5,left:0}},r.a.createElement(De.g,{dataKey:"quantity",data:c,label:!0,innerRadius:75,outerRadius:100,paddingAngle:5},c.map((function(e,t){return r.a.createElement(De.c,{key:e.name,fill:Be[t%Be.length]})}))),r.a.createElement(De.j,null),r.a.createElement(De.e,{verticalAlign:"top",wrapperStyle:{top:"-1em"}})))),r.a.createElement(p.a,{justify:"center"},r.a.createElement(De.i,{width:"100%",height:300},r.a.createElement(De.h,{margin:{top:5,right:0,bottom:5,left:0}},r.a.createElement(De.g,{dataKey:"quantity",data:i,label:!0,innerRadius:75,outerRadius:100,paddingAngle:5},i.map((function(e,t){return r.a.createElement(De.c,{key:e.name,fill:Ie[t%Ie.length]})}))),r.a.createElement(De.j,null),r.a.createElement(De.e,{verticalAlign:"top",wrapperStyle:{top:"-1em"}}))))))};var Se=function(e){var t=e.mealsData,a=e.who,c=Object(n.useMemo)((function(){return function(e,t){var a=e.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{day:T()(e.date,"DD-MM-YYYY").day()})})),n=window.innerWidth<500?["S","M","T","W","T","F","S"]:["Sun","Mon","Tue","Wed","Thur","Fri","Sat"],r=a.filter((function(e){return"both"===t||t===e.who}));return n.map((function(e,t){return{day:n[t],lunch:r.filter((function(e){return e.day===t&&!e.isDinner})).length,dinner:r.filter((function(e){return e.day===t&&e.isDinner})).length}}))}(t,a)}),[t,a]);return r.a.createElement(p.a,{justify:"center"},r.a.createElement(De.i,{width:"100%",height:300},r.a.createElement(De.b,{data:c},r.a.createElement(De.j,null),r.a.createElement(De.e,{verticalAlign:"top",wrapperStyle:{top:"-1em"}}),r.a.createElement(De.k,{dataKey:"day"}),r.a.createElement(De.l,null),r.a.createElement(De.a,{stackId:"a",units:"meals",fill:Ce.blue[5],dataKey:"dinner",barSize:20,name:"Number of dinners"}),r.a.createElement(De.a,{stackId:"a",units:"meals",fill:Ce.gold[5],dataKey:"lunch",barSize:20,name:"Number of lunches"}))))};var xe=a(665),Ye=A.a.Text,Me=function(e){var t=e.mealsData,a=e.who,c=e.authState,i=Object(n.useState)(!1),l=Object(s.a)(i,2),u=l[0],o=l[1],m=Object(G.b)(ce),d=m.data,f=m.loading,E=Object(G.a)(Z),h=Object(s.a)(E,1)[0];if(u&&f)return r.a.createElement(ue,null);var g=Qe(u?d.meals:t,a);return r.a.createElement(p.a,null,r.a.createElement(b.a,{sm:{span:18,offset:3},xs:{span:24}},r.a.createElement(p.a,{type:"flex",justify:"end"},r.a.createElement(U.a,{key:"switch",checkedChildren:"Testing",unCheckedChildren:"Testing",checked:u,onChange:function(e){return o(e)}})),r.a.createElement(xe.b,{itemLayout:"horizontal",dataSource:g,renderItem:function(e){return r.a.createElement(xe.b.Item,{actions:[r.a.createElement("p",{key:e.id,onClick:function(t){!function(e,t){t.preventDefault(),c?window.confirm("Are you sure you want to delete ?")&&h({variables:{id:e},refetchQueries:[{query:ae},{query:ce}]}):alert("You must be logged in to do this")}(e.id,t)}},"Delete")]},r.a.createElement(xe.b.Item.Meta,{title:e.title,description:e.description}))}})))};function Qe(e,t){return e.filter((function(e){return"both"===t||e.shared||e.who===t})).map((function(e){return Object(o.a)(Object(o.a)({},e),{},{date:T()(e.date,"DD-MM-YYYY").toDate()})})).sort((function(e,t){return t.date-e.date})).map((function(e){var t=e.date.toDateString();return{title:"".concat(e.shared?"Shared":e.who," on ").concat(t),description:r.a.createElement(Ye,null,e.menu.category,": ",e.menu.name," - $",e.menu.cost,e.test?r.a.createElement(Ye,{type:"danger"}," - TESTING"):""),id:e.id}}))}var Ue=function(e){var t=e.mealsData,a=e.who,c=Object(n.useState)("quantity"),i=Object(s.a)(c,2),l=i[0],u=i[1],m=Object(n.useState)("all"),d=Object(s.a)(m,2),f=d[0],E=d[1],h="all"===f?["Salad","Pasta","Pizza","Zoodle"]:[f],g=Object(G.b)(re,{variables:{category:h}}).data;if(!g||!t)return r.a.createElement(ue,null);var A=function(e,t,a,n){var r=e.map((function(e){var n=t.filter((function(t){return t.menu.name===e.name})),r=n.map((function(e){return"both"===a?1:e.shared?.5:a===e.who?1:0})),c=r.length>0?r.reduce((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return e+t})):0,i=n.reduce((function(e,t){var a=T()(t.date,"DD-MM-YYYY").toDate();return e<a?a:e}),T()("01/01/2020","DD-MM-YYYY").toDate());return Object(o.a)(Object(o.a)({},e),{},{key:e.id,quantity:c,last:c?i:"",active:e.active})}));switch(n){case"last":return r.sort((function(e,t){return t.last-e.last}));case"quantity":return r.sort((function(e,t){return t.quantity-e.quantity}));default:return r.sort((function(e,t){return e[n].localeCompare(t[n])}))}}(g.menu,t,a,l);return r.a.createElement(j.a,{layout:"horizontal"},r.a.createElement(p.a,{justify:"space-around"},r.a.createElement(b.a,{xs:8,sm:8},r.a.createElement(j.a.Item,{label:"Menu"},r.a.createElement(M.a,{onChange:function(e){return E(e)},value:f,size:"small"},r.a.createElement(M.a.Option,{value:"all"},"All"),r.a.createElement(M.a.Option,{value:"Salad"},"Salad"),r.a.createElement(M.a.Option,{value:"Pasta"},"Pasta"),r.a.createElement(M.a.Option,{value:"Pizza"},"Pizza"),r.a.createElement(M.a.Option,{value:"Zoodle"},"Zoodle")))),r.a.createElement(b.a,{xs:8,sm:8},r.a.createElement(j.a.Item,{label:"Sort"},r.a.createElement(M.a,{onChange:function(e){return u(e)},value:l,size:"small"},r.a.createElement(M.a.Option,{value:"quantity"},"Quantity"),r.a.createElement(M.a.Option,{value:"last"},"Last Eaten"),r.a.createElement(M.a.Option,{value:"name"},"Name"))))),r.a.createElement(p.a,{justify:"center"},r.a.createElement(b.a,{xs:22,sm:18},r.a.createElement(xe.b,{itemLayout:"horizontal",dataSource:A,renderItem:function(e){return r.a.createElement(xe.b.Item,{actions:[r.a.createElement(U.a,{key:"switch",size:"small",checkedChildren:"Active",unCheckedChildren:"Active",checked:e.active,disabled:!0})]},r.a.createElement(xe.b.Item.Meta,{title:e.name,description:"Eaten ".concat(e.quantity," time").concat(e.quantity>1?"s":"",".").concat(e.last&&" Last eaten on ".concat(e.last.toDateString(),"."))}))}}))))};var ze=A.a.Text,Ne=A.a.Title,Te={summary:"Summary",history:"History",split:"Meal Split",weekdays:"Weekday Split",meals:"Meals List",menu:"Menu Summary"},Ge=function(e){var t=e.authState,a=Object(G.b)(ae),c=a.data,i=a.error,l=Object(k.useService)(P),u=Object(s.a)(l,2),o=u[0],m=u[1],d=Object(n.useState)("both"),f=Object(s.a)(d,2),E=f[0],h=f[1];if(i)return console.error(i),r.a.createElement(ze,{type:"danger"},"Hasura error, see Console");if(!c)return r.a.createElement(ue,null);var g=c.meals;return r.a.createElement(p.a,null,r.a.createElement(b.a,{span:24},r.a.createElement(y.a,{direction:"vertical",size:"small",style:{width:"100%"}},r.a.createElement(p.a,{justify:"space-between"},r.a.createElement(b.a,{span:4,style:{textAlign:"center"}},r.a.createElement(D.a,{icon:r.a.createElement(ye.a,null),onClick:function(){return m("PREVIOUS")}})),r.a.createElement(b.a,{span:16,style:{textAlign:"center"}},r.a.createElement(Ne,{level:4},Te[o.value.analytics])),r.a.createElement(b.a,{span:4,style:{textAlign:"center"}},r.a.createElement(D.a,{icon:r.a.createElement(Y.a,null),onClick:function(){return m("NEXT")}}))),r.a.createElement(p.a,{style:{marginTop:8,marginBottom:8}},r.a.createElement(b.a,{sm:{offset:3}},r.a.createElement(M.a,{defaultValue:E,onChange:function(e){return h(e)},size:"small"},r.a.createElement(M.a.Option,{value:"both"},"Both"),r.a.createElement(M.a.Option,{value:"Katie"},"Katie"),r.a.createElement(M.a.Option,{value:"Chris"},"Chris")))),r.a.createElement(p.a,null,r.a.createElement(b.a,{span:24},o.matches({analytics:"summary"})&&r.a.createElement(Oe,{mealsData:g,who:E}),o.matches({analytics:"history"})&&r.a.createElement(ke,{mealsData:g,who:E}),o.matches({analytics:"split"})&&r.a.createElement(Pe,{mealsData:g,who:E}),o.matches({analytics:"weekdays"})&&r.a.createElement(Se,{mealsData:g,who:E}),o.matches({analytics:"meals"})&&r.a.createElement(Me,{mealsData:g,who:E,authState:t}),o.matches({analytics:"menu"})&&r.a.createElement(Ue,{mealsData:g,who:E}))))))},Re=a(338),He=a.n(Re),Fe=Object(n.createContext)({token:null,isAuthenticating:!1,isAuthenticated:!1,updateAuth:function(){},signIn:function(){},signOut:function(){}}),qe=A.a.Title,Je=A.a.Text,Ke=function(){var e=Object(k.useService)(P),t=Object(s.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(!1),m=Object(s.a)(i,2),d=m[0],f=m[1],E=Object(n.useState)({}),A=Object(s.a)(E,2),B=A[0],I=A[1],S=Object(n.useState)(),x=Object(s.a)(S,2),Y=x[0],M=x[1],Q=Object(n.useState)(!1),U=Object(s.a)(Q,2),z=U[0],N=U[1],T=Object(n.useContext)(Fe),G=T.signIn,R=T.signOut,H=T.isAuthenticated,F=function(){var e=Object(u.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(!1),t=B.email,a=B.password,e.prev=2,N(!0),e.next=6,G(t,a);case 6:f(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),M(e.t0),I(Object(o.a)(Object(o.a)({},B),{},{password:""}));case 13:return e.prev=13,N(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,9,13,16]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{direction:"vertical",size:"middle",style:{width:"100%"}},r.a.createElement(p.a,{align:"middle",justify:"start"},r.a.createElement(b.a,{sm:{span:2,offset:1},xs:{span:4,offset:1}},r.a.createElement("img",{src:He.a,style:{width:"75%"},alt:"Site logo, knife and fork"})),r.a.createElement(b.a,{sm:20,xs:18},r.a.createElement(qe,{style:{marginBottom:"0"}},"Penne Pinching"))),r.a.createElement(p.a,null,r.a.createElement(b.a,{span:24},r.a.createElement(v.a,{selectedKeys:Object.keys(a.value),mode:"horizontal",onClick:function(e){return function(e){"add"===e&&c("ADD"),"analytics"===e&&c("ANALYTICS"),"login"===e&&f(!0),"logout"===e&&R()}(e.key)}},r.a.createElement(v.a.Item,{key:"add"},r.a.createElement(h.a,null),"Add"),r.a.createElement(v.a.Item,{key:"analytics"},r.a.createElement(g.a,null),"Analytics"),H&&r.a.createElement(v.a.Item,{key:"logout"},"Log out"),!H&&r.a.createElement(v.a.Item,{key:"login"},"Log in")))),r.a.createElement(p.a,{justify:"center"},r.a.createElement(b.a,{span:20},a.matches("add")&&r.a.createElement(Ae,{authState:H}),a.matches("analytics")&&r.a.createElement(Ge,{authState:H})))),r.a.createElement(w.a,{title:"Log In",visible:d,onCancel:function(){return f(!1)},footer:null},r.a.createElement(j.a,{onFinish:F},r.a.createElement(j.a.Item,{label:"Email"},r.a.createElement(O.a,{onChange:function(e){return I(Object(o.a)(Object(o.a)({},B),{},{email:e.target.value}))},value:B.email,autoFocus:!0})),r.a.createElement(j.a.Item,{label:"Password"},r.a.createElement(O.a.Password,{onChange:function(e){return I(Object(o.a)(Object(o.a)({},B),{},{password:e.target.value}))},value:B.password})),r.a.createElement(D.a,{loading:z,icon:r.a.createElement(C.a,null),htmlType:"submit"},"Submit"),Y&&r.a.createElement(p.a,null,r.a.createElement(Je,{type:"danger"},Y.message)))))},Le=function(){var e=Object(n.useState)({token:null,isAuthenticating:!0,isAuthenticated:!1,updateAuth:function(e){return c((function(t){return Object(o.a)(Object(o.a)({},t),e)}))},signIn:function(){var e=Object(u.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.auth().signInWithEmailAndPassword(t,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),signOut:function(){return E.a.auth().signOut()}}),t=Object(s.a)(e,2),a=t[0],c=t[1],i=a.token,f=a.updateAuth,h=new d.a({uri:"https://penne-pinching.herokuapp.com/v1/graphql",headers:i?{Authorization:"Bearer ".concat(i)}:{}});return Object(n.useEffect)((function(){return E.a.auth().onAuthStateChanged(function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f({isAuthenticating:!0}),!t){e.next=12;break}return e.next=4,t.getIdToken();case 4:return a=e.sent,e.next=7,t.getIdTokenResult();case 7:n=e.sent,r=n.claims["https://hasura.io/jwt/claims"],f(r?{token:a}:{token:null}),e.next=13;break;case 12:f({token:null});case 13:f({isAuthenticating:!1});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(n.useEffect)((function(){f(i?{isAuthenticated:!0}:{isAuthenticated:!1})}),[i]),r.a.createElement("div",{id:"app"},r.a.createElement(Fe.Provider,{value:a},r.a.createElement(m.a,{client:h},r.a.createElement(Ke,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(656);E.a.initializeApp({apiKey:"AIzaSyCQj8TxcSIRvXVOfZyWwbWe1w11cxxFiIw",authDomain:"penne-pinching.firebaseapp.com",databaseURL:"https://penne-pinching.firebaseio.com",projectId:"penne-pinching",storageBucket:"penne-pinching.appspot.com",messagingSenderId:"305728508038",appId:"1:305728508038:web:ab5a360f93018d34fac107"});var We=document.getElementById("root");We.hasChildNodes()?Object(c.hydrate)(r.a.createElement(Le,null),We):Object(c.render)(r.a.createElement(Le,null),We),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[363,1,2]]]);
//# sourceMappingURL=main.b75d9506.chunk.js.map